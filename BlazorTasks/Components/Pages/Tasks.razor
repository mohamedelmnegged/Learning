@page "/tasks"
@rendermode InteractiveServer
@inject TaskService taskService

<PageTitle>Tasks</PageTitle>

<h3>My Tasks</h3>

<input @bind="newTask" placeholder="New task" />
<button class="btn btn-primary" @onclick="AddTask">Add</button>

<ul>
    @foreach (var task in taskService.GetTasks())
    {
        <li>
            <input type="checkbox"
                   checked="@task.IsCompleted"
                   @onchange="() => Toggle(task.Id)" />

            <span style="@(task.IsCompleted ? "text-decoration: line-through" : "")">
                @task.Title
            </span>
        </li>
    }
</ul>

@code {
    string newTask = "";

    void AddTask()
    {
        if (!string.IsNullOrWhiteSpace(newTask))
        {
            taskService.AddTask(newTask);
            newTask = "";
        }
    }

    void Toggle(int id)
    {
        taskService.Toggle(id);
    }
}
